<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mold Tracking</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

    <h2 class="text-center">Mold Tracking System</h2>

    <!-- 입력 폼 -->
    <form id="moldForm">
        <div class="mb-3">
            <label class="form-label">Mold ID</label>
            <select id="moldType" class="form-select">
                <option value="MEB">MEB</option>
                <option value="E603C">E603C</option>
            </select>
            <select id="moldCategory" class="form-select mt-2">
                <option value="CA">CA</option>
                <option value="AN">AN</option>
            </select>
            <input type="text" id="moldNumber" class="form-control mt-2" placeholder="번호 입력">
        </div>

        <div class="mb-3">
            <label class="form-label">몰드 상태</label>
            <select id="moldStatus" class="form-select">
                <option value="입고">입고</option>
                <option value="출고">출고</option>
            </select>
            <input type="date" id="statusDate" class="form-control mt-2">
        </div>

        <div class="mb-3">
            <label class="form-label">몰드 검사 상태</label>
            <input type="text" id="inspectionStatus" class="form-control">
        </div>

        <div class="mb-3">
            <label class="form-label">검사자</label>
            <input type="text" id="inspector" class="form-control">
        </div>

        <button type="button" class="btn btn-primary" onclick="saveMold()">저장</button>
        <button type="button" class="btn btn-success" onclick="fetchMolds()">조회</button>
    </form>

    <!-- 데이터 리스트 -->
    <table class="table mt-4">
        <thead>
            <tr>
                <th>ID</th>
                <th>몰드</th>
                <th>상태</th>
                <th>검사 상태</th>
                <th>검사자</th>
                <th>관리</th>
            </tr>
        </thead>
        <tbody id="moldTable"></tbody>
    </table>

    <script>
        let moldData = [];

        function saveMold() {
            const id = Date.now();
            const mold = `${document.getElementById('moldType').value}/${document.getElementById('moldCategory').value}/${document.getElementById('moldNumber').value}`;
            const status = document.getElementById('moldStatus').value;
            const date = document.getElementById('statusDate').value;
            const inspection = document.getElementById('inspectionStatus').value;
            const inspector = document.getElementById('inspector').value;

            const newMold = { id, mold, status, date, inspection, inspector };
            moldData.push(newMold);
            renderTable();
        }

        function fetchMolds() {
            renderTable();
        }

        function renderTable() {
            const tableBody = document.getElementById('moldTable');
            tableBody.innerHTML = '';

            moldData.forEach(mold => {
                const row = `<tr>
                    <td>${mold.id}</td>
                    <td>${mold.mold}</td>
                    <td>${mold.status} (${mold.date})</td>
                    <td>${mold.inspection}</td>
                    <td>${mold.inspector}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editMold(${mold.id})">수정</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteMold(${mold.id})">삭제</button>
                    </td>
                </tr>`;
                tableBody.innerHTML += row;
            });
        }

        function editMold(id) {
            const mold = moldData.find(m => m.id === id);
            if (mold) {
                document.getElementById('moldType').value = mold.mold.split('/')[0];
                document.getElementById('moldCategory').value = mold.mold.split('/')[1];
                document.getElementById('moldNumber').value = mold.mold.split('/')[2];
                document.getElementById('moldStatus').value = mold.status;
                document.getElementById('statusDate').value = mold.date;
                document.getElementById('inspectionStatus').value = mold.inspection;
                document.getElementById('inspector').value = mold.inspector;

                deleteMold(id);
            }
        }

        function deleteMold(id) {
            moldData = moldData.filter(m => m.id !== id);
            renderTable();
        }
    </script>

</body>
</html>
